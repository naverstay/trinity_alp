script.
    function siteData() {
        return {
            popupText: 'Сообщение',
            popupTitle: 'Заголовок',
            popupShow: false,
            showMainMenu: false,
            mainPopup(show, txt) {
                this.popupShow = show;
                this.popupText = txt;
            },
            openMainMenu() {
                this.showMainMenu = true
            },
            closeMainMenu() {
                this.showMainMenu = false
            },
            mainMenuIsOpen() {
                return this.showMainMenu === true
            },

            items: [{title: 'test', tags: ['ok1', 'ok2']}, {title: 'test2', tags: ['ok2']}],
            activeMenu: 0,
            toggleDropdownMenu(index, ref) {
                let that = this;

                ref && window.slideToggle(ref, 300, function (ret) {
                    console.log('ret', ret);

                    if (ret === 'up') {
                        that.activeMenu = 0;
                    } else {
                        that.activeMenu = index;
                    }
                });
            },
            toggleDropdownClass(menu, ref) {
                let list = menu.querySelectorAll('.sublist');

                for (let i = 0; i < list.length; i++) {
                    let child = list[i];

                    if (child !== ref) {
                        window.slideUp(child, 300);
                    }
                }
            },
            isActiveDropdown(index) {
                return this.activeMenu === index;
            }
        }
    }

    function slideActions() {
        return {
            slideOpen: false,
            slideToggle(evt, parent) {
                evt.preventDefault();

                let that = this;

                if (parent) {
                    let slide = parent.querySelectorAll('.slideBlock');

                    for (let i = 0; i < slide.length; i++) {
                        const sld = slide[i];

                        window.slideToggle(sld, 200, function (ret) {
                            if (ret === 'up') {
                                that.slideOpen = false;
                            } else {
                                that.slideOpen = true;
                            }
                        });
                    }
                }

                return false;
            },
            isOpen() {
                return this.slideOpen;
            },
        }
    }

    function configuratorAlpine() {
        return {
            brand: {
                "38": [
                    {
                        "id": "0",
                        "type_id": "38",
                        "brand_id": "0",
                        "name": "Нет данных",
                        "short_name": "Нет данных",
                        "description": "Нет данных",
                        "price": 0,
                        "base_price": 0,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    }
                ],
                "39": [
                    {
                        "id": "1206",
                        "type_id": 39,
                        "brand_id": "23",
                        "name": "1TB, 7200rpm, SATA, Enterprise",
                        "short_name": "1TB, 7200rpm, SATA, Enterprise",
                        "description": "1TB, 7200rpm, SATA, Enterprise",
                        "price": 100,
                        "base_price": 100,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1207",
                        "type_id": 39,
                        "brand_id": "23",
                        "name": "2TB, 7200rpm, SATA, Enterprise",
                        "short_name": "2TB, 7200rpm, SATA, Enterprise",
                        "description": "2TB, 7200rpm, SATA, Enterprise",
                        "price": 132,
                        "base_price": 132,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1209",
                        "type_id": 39,
                        "brand_id": "23",
                        "name": "4TB, 7200rpm, SATA, Enterprise",
                        "short_name": "4TB, 7200rpm, SATA, Enterprise",
                        "description": "4TB, 7200rpm, SATA, Enterprise",
                        "price": 186,
                        "base_price": 186,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1208",
                        "type_id": 39,
                        "brand_id": "23",
                        "name": "6TB, 7200rpm, SATA, Enterprise",
                        "short_name": "6TB, 7200rpm, SATA, Enterprise",
                        "description": "6TB, 7200rpm, SATA, Enterprise",
                        "price": 236,
                        "base_price": 236,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1211",
                        "type_id": 39,
                        "brand_id": "23",
                        "name": "8TB, 7200rpm, SATA, Enterprise",
                        "short_name": "8TB, 7200rpm, SATA, Enterprise",
                        "description": "8TB, 7200rpm, SATA, Enterprise",
                        "price": 312,
                        "base_price": 312,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1210",
                        "type_id": 39,
                        "brand_id": "23",
                        "name": "10TB, 7200rpm, SATA, Enterprise",
                        "short_name": "10TB, 7200rpm, SATA, Enterprise",
                        "description": "10TB, 7200rpm, SATA, Enterprise",
                        "price": 360,
                        "base_price": 360,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1212",
                        "type_id": 39,
                        "brand_id": "23",
                        "name": "12TB, 7200rpm, SATA, Enterprise",
                        "short_name": "12TB, 7200rpm, SATA, Enterprise",
                        "description": "12TB, 7200rpm, SATA, Enterprise",
                        "price": 372,
                        "base_price": 372,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    }
                ],
                "40": [
                    {
                        "id": "1213",
                        "type_id": 40,
                        "brand_id": "24",
                        "name": "300GB, 2.5&quot;, 10000rpm, SAS",
                        "short_name": "300GB, 2.5&quot;, 10000rpm, SAS",
                        "description": "300GB, 2.5&quot;, 10000rpm, SAS",
                        "price": 129,
                        "base_price": 129,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1215",
                        "type_id": 40,
                        "brand_id": "24",
                        "name": "600GB, 2.5&quot;, 10000rpm, SAS",
                        "short_name": "600GB, 2.5&quot;, 10000rpm, SAS",
                        "description": "600GB, 2.5&quot;, 10000rpm, SAS",
                        "price": 218,
                        "base_price": 218,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1214",
                        "type_id": 40,
                        "brand_id": "24",
                        "name": "900GB, 2.5&quot;, 10000rpm, SAS",
                        "short_name": "900GB, 2.5&quot;, 10000rpm, SAS",
                        "description": "900GB, 2.5&quot;, 10000rpm, SAS",
                        "price": 258,
                        "base_price": 258,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1216",
                        "type_id": 40,
                        "brand_id": "24",
                        "name": "1200GB, 2.5&quot;, 10000rpm, SAS",
                        "short_name": "1200GB, 2.5&quot;, 10000rpm, SAS",
                        "description": "1200GB, 2.5&quot;, 10000rpm, SAS",
                        "price": 261,
                        "base_price": 261,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1217",
                        "type_id": 40,
                        "brand_id": "24",
                        "name": "1800GB, 2.5&quot;, 10000rpm, SAS",
                        "short_name": "1800GB, 2.5&quot;, 10000rpm, SAS",
                        "description": "1800GB, 2.5&quot;, 10000rpm, SAS",
                        "price": 358,
                        "base_price": 358,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1218",
                        "type_id": 40,
                        "brand_id": "24",
                        "name": "300GB, 2.5&quot;, 15000rpm, SAS",
                        "short_name": "300GB, 2.5&quot;, 15000rpm, SAS",
                        "description": "300GB, 2.5&quot;, 15000rpm, SAS",
                        "price": 212,
                        "base_price": 212,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1219",
                        "type_id": 40,
                        "brand_id": "24",
                        "name": "600GB, 2.5&quot;, 15000rpm, SAS",
                        "short_name": "600GB, 2.5&quot;, 15000rpm, SAS",
                        "description": "600GB, 2.5&quot;, 15000rpm, SAS",
                        "price": 294,
                        "base_price": 294,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    }
                ],
                "41": [
                    {
                        "id": "0",
                        "type_id": "41",
                        "brand_id": "21",
                        "name": "",
                        "short_name": "",
                        "description": "",
                        "price": 0,
                        "base_price": 0,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1200",
                        "type_id": 41,
                        "brand_id": "21",
                        "name": "LSI MegaRAID SAS 9361-8i (8port SAS3, 1GB)",
                        "short_name": "LSI MegaRAID SAS 9361-8i (8port SAS3, 1GB)",
                        "description": "LSI MegaRAID SAS 9361-8i (8port SAS3, 1GB)",
                        "price": 522,
                        "base_price": 522,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1197",
                        "type_id": 41,
                        "brand_id": "21",
                        "name": "Adaptec RAID 8405 (4port SAS3, 1GB)",
                        "short_name": "Adaptec RAID 8405 (4port SAS3, 1GB)",
                        "description": "Adaptec RAID 8405 (4port SAS3, 1GB)",
                        "price": 462,
                        "base_price": 462,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1198",
                        "type_id": 41,
                        "brand_id": "21",
                        "name": "Adaptec RAID 8805 (8port SAS3, 1GB)",
                        "short_name": "Adaptec RAID 8805 (8port SAS3, 1GB)",
                        "description": "Adaptec RAID 8805 (8port SAS3, 1GB)",
                        "price": 636,
                        "base_price": 636,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1199",
                        "type_id": 41,
                        "brand_id": "21",
                        "name": "LSI MegaRAID SAS 9361-4i (4port SAS3, 1GB)",
                        "short_name": "LSI MegaRAID SAS 9361-4i (4port SAS3, 1GB)",
                        "description": "LSI MegaRAID SAS 9361-4i (4port SAS3, 1GB)",
                        "price": 492,
                        "base_price": 492,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1201",
                        "type_id": 41,
                        "brand_id": "21",
                        "name": "LSI MegaRAID SAS 9341-4i (4port SAS3, no cache)",
                        "short_name": "LSI MegaRAID SAS 9341-4i (4port SAS3, no cache)",
                        "description": "LSI MegaRAID SAS 9341-4i (4port SAS3, no cache)",
                        "price": 246,
                        "base_price": 246,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1202",
                        "type_id": 41,
                        "brand_id": "21",
                        "name": "LSI MegaRAID SAS 9341-8i (8port SAS3, no cache)",
                        "short_name": "LSI MegaRAID SAS 9341-8i (8port SAS3, no cache)",
                        "description": "LSI MegaRAID SAS 9341-8i (8port SAS3, no cache)",
                        "price": 312,
                        "base_price": 312,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1203",
                        "type_id": 41,
                        "brand_id": "21",
                        "name": "LSI MegaRAID SAS 9460-16i (4port NVMe)",
                        "short_name": "LSI MegaRAID SAS 9460-16i (4port NVMe)",
                        "description": "LSI MegaRAID SAS 9460-16i (4port NVMe)",
                        "price": 1174,
                        "base_price": 1174,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    }
                ],
                "42": [
                    {
                        "id": "1222",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "240GB, Read Intensive",
                        "short_name": "240GB, Read Intensive",
                        "description": "240GB, Read Intensive",
                        "price": 128,
                        "base_price": 128,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1223",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "480GB, Read Intensive",
                        "short_name": "480GB, Read Intensive",
                        "description": "480GB, Read Intensive",
                        "price": 170,
                        "base_price": 170,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1224",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "200GB, High Load",
                        "short_name": "200GB, High Load",
                        "description": "200GB, High Load",
                        "price": 366,
                        "base_price": 366,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1225",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "400GB, High Load",
                        "short_name": "400GB, High Load",
                        "description": "400GB, High Load",
                        "price": 540,
                        "base_price": 540,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1226",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "800GB, High Load",
                        "short_name": "800GB, High Load",
                        "description": "800GB, High Load",
                        "price": 852,
                        "base_price": 852,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1227",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "1920GB, Read Intensive",
                        "short_name": "1920GB, Read Intensive",
                        "description": "1920GB, Read Intensive",
                        "price": 549,
                        "base_price": 549,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1229",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "240GB, Mid Load",
                        "short_name": "240GB, Mid Load",
                        "description": "240GB, Mid Load",
                        "price": 132,
                        "base_price": 132,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1230",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "480GB, Mid Load",
                        "short_name": "480GB, Mid Load",
                        "description": "480GB, Mid Load",
                        "price": 200,
                        "base_price": 200,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1231",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "960GB, Mid Load",
                        "short_name": "960GB, Mid Load",
                        "description": "960GB, Mid Load",
                        "price": 384,
                        "base_price": 384,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1232",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "1920GB, Mid Load",
                        "short_name": "1920GB, Mid Load",
                        "description": "1920GB, Mid Load",
                        "price": 682,
                        "base_price": 682,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1228",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "960GB, Read Intensive",
                        "short_name": "960GB, Read Intensive",
                        "description": "960GB, Read Intensive",
                        "price": 270,
                        "base_price": 270,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1233",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe 2.5, P4610, 1.6Тб",
                        "short_name": "NVMe 2.5, P4610, 1.6Тб",
                        "description": "NVMe 2.5, P4610, 1.6Тб",
                        "price": 450,
                        "base_price": 450,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1234",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe 2.5, P4600, 2Тб",
                        "short_name": "NVMe 2.5, P4600, 2Тб",
                        "description": "NVMe 2.5, P4600, 2Тб",
                        "price": 1284,
                        "base_price": 1284,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1235",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe 2.5, P4610, 3.2Тб",
                        "short_name": "NVMe 2.5, P4610, 3.2Тб",
                        "description": "NVMe 2.5, P4610, 3.2Тб",
                        "price": 1440,
                        "base_price": 1440,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1236",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe 2.5, P4610, 6.4Тб",
                        "short_name": "NVMe 2.5, P4610, 6.4Тб",
                        "description": "NVMe 2.5, P4610, 6.4Тб",
                        "price": 2916,
                        "base_price": 2916,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1237",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe Intel Optane SSD DC P4800X 375GB",
                        "short_name": "NVMe Intel Optane SSD DC P4800X 375GB",
                        "description": "NVMe Intel Optane SSD DC P4800X 375GB",
                        "price": 1392,
                        "base_price": 1392,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1238",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe Intel Optane SSD DC P4800X 750GB",
                        "short_name": "NVMe Intel Optane SSD DC P4800X 750GB",
                        "description": "NVMe Intel Optane SSD DC P4800X 750GB",
                        "price": 3108,
                        "base_price": 3108,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1239",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe 2.5, P4510, 4Тб",
                        "short_name": "NVMe 2.5, P4510, 4Тб",
                        "description": "NVMe 2.5, P4510, 4Тб",
                        "price": 1485,
                        "base_price": 1485,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1240",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe 2.5, P4510, 2Тб",
                        "short_name": "NVMe 2.5, P4510, 2Тб",
                        "description": "NVMe 2.5, P4510, 2Тб",
                        "price": 654,
                        "base_price": 654,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    },
                    {
                        "id": "1241",
                        "type_id": 42,
                        "brand_id": "25",
                        "name": "NVMe 2.5, P4510, 1Тб",
                        "short_name": "NVMe 2.5, P4510, 1Тб",
                        "description": "NVMe 2.5, P4510, 1Тб",
                        "price": 402,
                        "base_price": 402,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 12
                    }
                ],
                "43": [
                    {
                        "id": "1244",
                        "type_id": 43,
                        "brand_id": "26",
                        "name": "4GB DDR4-2666 ECC Reg",
                        "short_name": "4GB DDR4-2666 ECC Reg",
                        "description": "4GB DDR4-2666 ECC Reg",
                        "price": 63,
                        "base_price": 63,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 24
                    },
                    {
                        "id": "1245",
                        "type_id": 43,
                        "brand_id": "26",
                        "name": "8GB DDR4-2666 ECC Reg",
                        "short_name": "8GB DDR4-2666 ECC Reg",
                        "description": "8GB DDR4-2666 ECC Reg",
                        "price": 78,
                        "base_price": 78,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 24
                    },
                    {
                        "id": "1246",
                        "type_id": 43,
                        "brand_id": "26",
                        "name": "16GB DDR4-2666 ECC Reg",
                        "short_name": "16GB DDR4-2666 ECC Reg",
                        "description": "16GB DDR4-2666 ECC Reg",
                        "price": 118,
                        "base_price": 118,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 24
                    },
                    {
                        "id": "1247",
                        "type_id": 43,
                        "brand_id": "26",
                        "name": "32GB DDR4-2666 ECC Reg",
                        "short_name": "32GB DDR4-2666 ECC Reg",
                        "description": "32GB DDR4-2666 ECC Reg",
                        "price": 198,
                        "base_price": 198,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 24
                    }
                ],
                "46": [
                    {
                        "id": "1162",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "8 Intel® Xeon® Scalable 6132 Gold 14 Core 2.60G 19.25M 140W",
                        "short_name": "Intel® Xeon® Scalable 6132 Gold 14 Core 2.60G 19.25M 140W",
                        "description": "Intel® Xeon® Scalable 6132 Gold 14 Core 2.60G 19.25M 140W",
                        "price": 2878,
                        "base_price": 2878,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 8,
                        "count": 2
                    },
                    {
                        "id": "1163",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "6 Intel® Xeon® Scalable 6128 Gold 6 Core 3.40G 19.25M 115W",
                        "short_name": "Intel® Xeon® Scalable 6128 Gold 6 Core 3.40G 19.25M 115W",
                        "description": "Intel® Xeon® Scalable 6128 Gold 6 Core 3.40G 19.25M 115W",
                        "price": 2370,
                        "base_price": 2370,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 6,
                        "count": 2
                    },
                    {
                        "id": "1164",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "4 Intel® Xeon® Scalable 4212 Silver 4 Core 2.60G 8.25M 85W",
                        "short_name": "Intel® Xeon® Scalable 4212 Silver 4 Core 2.60G 8.25M 85W",
                        "description": "Intel® Xeon® Scalable 4212 Silver 4 Core 2.60G 8.25M 85W",
                        "price": 936,
                        "base_price": 936,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 4,
                        "count": 2
                    },
                    {
                        "id": "1165",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "16 Intel® Xeon® Scalable 3206 Bronze 8 Core 1.70G 11M 85W",
                        "short_name": "Intel® Xeon® Scalable 3206 Bronze 8 Core 1.70G 11M 85W",
                        "description": "Intel® Xeon® Scalable 3206 Bronze 8 Core 1.70G 11M 85W",
                        "price": 452,
                        "base_price": 452,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 16,
                        "count": 2
                    },
                    {
                        "id": "1166",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "24 Intel® Xeon® Scalable 8153 Platinum 16 Core 2.00G 22M 125W",
                        "short_name": "Intel® Xeon® Scalable 8153 Platinum 16 Core 2.00G 22M 125W",
                        "description": "Intel® Xeon® Scalable 8153 Platinum 16 Core 2.00G 22M 125W",
                        "price": 4297,
                        "base_price": 4297,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 24,
                        "count": 2
                    },
                    {
                        "id": "1168",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "32 Intel® Xeon® Scalable 8158 Platinum 12 Core 3.00G 24.75M 150W",
                        "short_name": "Intel® Xeon® Scalable 8158 Platinum 12 Core 3.00G 24.75M 150W",
                        "description": "Intel® Xeon® Scalable 8158 Platinum 12 Core 3.00G 24.75M 150W",
                        "price": 9907,
                        "base_price": 9907,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 32,
                        "count": 2
                    },
                    {
                        "id": "1169",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "12 Intel® Xeon® Scalable 8160 Platinum 24 Core 2.10G 33M 150W",
                        "short_name": "Intel® Xeon® Scalable 8160 Platinum 24 Core 2.10G 33M 150W",
                        "description": "Intel® Xeon® Scalable 8160 Platinum 24 Core 2.10G 33M 150W",
                        "price": 5871,
                        "base_price": 5871,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 12,
                        "count": 2
                    },
                    {
                        "id": "1170",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "2 Intel® Xeon® Scalable 8168 Platinum 24 Core 2.70G 33M 205W",
                        "short_name": "Intel® Xeon® Scalable 8168 Platinum 24 Core 2.70G 33M 205W",
                        "description": "Intel® Xeon® Scalable 8168 Platinum 24 Core 2.70G 33M 205W",
                        "price": 8125,
                        "base_price": 8125,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 2,
                        "count": 2
                    },
                    {
                        "id": "1171",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "4 Intel® Xeon® Scalable 8170 Platinum 26 Core 2.10G 35.75M 165W",
                        "short_name": "Intel® Xeon® Scalable 8170 Platinum 26 Core 2.10G 35.75M 165W",
                        "description": "Intel® Xeon® Scalable 8170 Platinum 26 Core 2.10G 35.75M 165W",
                        "price": 10215,
                        "base_price": 10215,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 4,
                        "count": 2
                    },
                    {
                        "id": "1172",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "1 Intel® Xeon® Scalable 8180 Platinum 28 Core 2.50G 38.5M 205W",
                        "short_name": "Intel® Xeon® Scalable 8180 Platinum 28 Core 2.50G 38.5M 205W",
                        "description": "Intel® Xeon® Scalable 8180 Platinum 28 Core 2.50G 38.5M 205W",
                        "price": 13806,
                        "base_price": 13806,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 2
                    },
                    {
                        "id": "1175",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "16 Intel® Xeon® Scalable 3204 Bronze 6 Core 1.90G 8.25M 85W",
                        "short_name": "Intel® Xeon® Scalable 3204 Bronze 6 Core 1.90G 8.25M 85W",
                        "description": "Intel® Xeon® Scalable 3204 Bronze 6 Core 1.90G 8.25M 85W",
                        "price": 290,
                        "base_price": 290,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 16,
                        "count": 2
                    },
                    {
                        "id": "1176",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "32 Intel® Xeon® Scalable 4208 Silver 8 Core 2.10G 11M 85W",
                        "short_name": "Intel® Xeon® Scalable 4208 Silver 8 Core 2.10G 11M 85W",
                        "description": "Intel® Xeon® Scalable 4208 Silver 8 Core 2.10G 11M 85W",
                        "price": 612,
                        "base_price": 612,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 32,
                        "count": 2
                    },
                    {
                        "id": "1177",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "24 Intel® Xeon® Scalable 4210 Silver 10 Core 2.20G 13.75M 85W",
                        "short_name": "Intel® Xeon® Scalable 4210 Silver 10 Core 2.20G 13.75M 85W",
                        "description": "Intel® Xeon® Scalable 4210 Silver 10 Core 2.20G 13.75M 85W",
                        "price": 660,
                        "base_price": 660,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 24,
                        "count": 2
                    },
                    {
                        "id": "1178",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "12 Intel® Xeon® Scalable 4214 Silver 12 Core 2.20G 16.5M 85W",
                        "short_name": "Intel® Xeon® Scalable 4214 Silver 12 Core 2.20G 16.5M 85W",
                        "description": "Intel® Xeon® Scalable 4214 Silver 12 Core 2.20G 16.5M 85W",
                        "price": 894,
                        "base_price": 894,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 12,
                        "count": 2
                    },
                    {
                        "id": "1179",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "16 Intel® Xeon® Scalable 4215 Silver 8 Core 2.50G 11M 85W",
                        "short_name": "Intel® Xeon® Scalable 4215 Silver 8 Core 2.50G 11M 85W",
                        "description": "Intel® Xeon® Scalable 4215 Silver 8 Core 2.50G 11M 85W",
                        "price": 1138,
                        "base_price": 1138,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 16,
                        "count": 2
                    },
                    {
                        "id": "1180",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "1 Intel® Xeon® Scalable 4216 Silver 16 Core 2.10G 22M 100W",
                        "short_name": "Intel® Xeon® Scalable 4216 Silver 16 Core 2.10G 22M 100W",
                        "description": "Intel® Xeon® Scalable 4216 Silver 16 Core 2.10G 22M 100W",
                        "price": 1386,
                        "base_price": 1386,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 2
                    },
                    {
                        "id": "1181",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "2 Intel® Xeon® Scalable 5215 Gold 10 Core 2.50G 13.75M 85W",
                        "short_name": "Intel® Xeon® Scalable 5215 Gold 10 Core 2.50G 13.75M 85W",
                        "description": "Intel® Xeon® Scalable 5215 Gold 10 Core 2.50G 13.75M 85W",
                        "price": 1884,
                        "base_price": 1884,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 2,
                        "count": 2
                    },
                    {
                        "id": "1182",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "16 Intel® Xeon® Scalable 5217 Gold 8 Core 3.00G 11M 115W",
                        "short_name": "Intel® Xeon® Scalable 5217 Gold 8 Core 3.00G 11M 115W",
                        "description": "Intel® Xeon® Scalable 5217 Gold 8 Core 3.00G 11M 115W",
                        "price": 2193,
                        "base_price": 2193,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 16,
                        "count": 2
                    },
                    {
                        "id": "1183",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "24 Intel® Xeon® Scalable 5218 Gold 16 Core 2.30G 22M 125W",
                        "short_name": "Intel® Xeon® Scalable 5218 Gold 16 Core 2.30G 22M 125W",
                        "description": "Intel® Xeon® Scalable 5218 Gold 16 Core 2.30G 22M 125W",
                        "price": 1722,
                        "base_price": 1722,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 24,
                        "count": 2
                    },
                    {
                        "id": "1184",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "32 Intel® Xeon® Scalable 5220 Gold 18 Core 2.20G 24.75M 125W",
                        "short_name": "Intel® Xeon® Scalable 5220 Gold 18 Core 2.20G 24.75M 125W",
                        "description": "Intel® Xeon® Scalable 5220 Gold 18 Core 2.20G 24.75M 125W",
                        "price": 2035,
                        "base_price": 2035,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 32,
                        "count": 2
                    },
                    {
                        "id": "1185",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "1 Intel® Xeon® Scalable 5222 Gold 4 Core 3.80G 16.5M 105W",
                        "short_name": "Intel® Xeon® Scalable 5222 Gold 4 Core 3.80G 16.5M 105W",
                        "description": "Intel® Xeon® Scalable 5222 Gold 4 Core 3.80G 16.5M 105W",
                        "price": 1734,
                        "base_price": 1734,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 2
                    },
                    {
                        "id": "1186",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "4 Intel® Xeon® Scalable 6226 Gold 12 Core 2.70G 19.25M 125W",
                        "short_name": "Intel® Xeon® Scalable 6226 Gold 12 Core 2.70G 19.25M 125W",
                        "description": "Intel® Xeon® Scalable 6226 Gold 12 Core 2.70G 19.25M 125W",
                        "price": 2316,
                        "base_price": 2316,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 4,
                        "count": 2
                    },
                    {
                        "id": "1187",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "8 Intel® Xeon® Scalable 6230 Gold 20 Core 2.10G 27.5M 125W",
                        "short_name": "Intel® Xeon® Scalable 6230 Gold 20 Core 2.10G 27.5M 125W",
                        "description": "Intel® Xeon® Scalable 6230 Gold 20 Core 2.10G 27.5M 125W",
                        "price": 2196,
                        "base_price": 2196,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 8,
                        "count": 2
                    },
                    {
                        "id": "1188",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "8 Intel® Xeon® Scalable 6234 Gold 8 Core 3.30G 24.75M 130W",
                        "short_name": "Intel® Xeon® Scalable 6234 Gold 8 Core 3.30G 24.75M 130W",
                        "description": "Intel® Xeon® Scalable 6234 Gold 8 Core 3.30G 24.75M 130W",
                        "price": 3108,
                        "base_price": 3108,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 8,
                        "count": 2
                    },
                    {
                        "id": "1189",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "16 Intel® Xeon® Scalable 6238 Gold 22 Core 2.10G 30.25M 140W",
                        "short_name": "Intel® Xeon® Scalable 6238 Gold 22 Core 2.10G 30.25M 140W",
                        "description": "Intel® Xeon® Scalable 6238 Gold 22 Core 2.10G 30.25M 140W",
                        "price": 3720,
                        "base_price": 3720,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 16,
                        "count": 2
                    },
                    {
                        "id": "1190",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "16 Intel® Xeon® Scalable 6240 Gold 18 Core 2.60G 24.75M 150W",
                        "short_name": "Intel® Xeon® Scalable 6240 Gold 18 Core 2.60G 24.75M 150W",
                        "description": "Intel® Xeon® Scalable 6240 Gold 18 Core 2.60G 24.75M 150W",
                        "price": 2878,
                        "base_price": 2878,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 16,
                        "count": 2
                    },
                    {
                        "id": "1191",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "24 Intel® Xeon® Scalable 6242 Gold 16 Core 2.80G 22M 150W",
                        "short_name": "Intel® Xeon® Scalable 6242 Gold 16 Core 2.80G 22M 150W",
                        "description": "Intel® Xeon® Scalable 6242 Gold 16 Core 2.80G 22M 150W",
                        "price": 3576,
                        "base_price": 3576,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 24,
                        "count": 2
                    },
                    {
                        "id": "1192",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "24 Intel® Xeon® Scalable 6244 Gold 8 Core 3.60G 24.75M 150W",
                        "short_name": "Intel® Xeon® Scalable 6244 Gold 8 Core 3.60G 24.75M 150W",
                        "description": "Intel® Xeon® Scalable 6244 Gold 8 Core 3.60G 24.75M 150W",
                        "price": 4158,
                        "base_price": 4158,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 24,
                        "count": 2
                    },
                    {
                        "id": "1193",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "1 Intel® Xeon® Scalable 6248 Gold 20 Core 2.50G 27.5M 150W",
                        "short_name": "Intel® Xeon® Scalable 6248 Gold 20 Core 2.50G 27.5M 150W",
                        "description": "Intel® Xeon® Scalable 6248 Gold 20 Core 2.50G 27.5M 150W",
                        "price": 3660,
                        "base_price": 3660,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 2
                    },
                    {
                        "id": "1194",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "1 Intel® Xeon® Scalable 6246 Gold 12 Core 3.30G 24.75M 165W",
                        "short_name": "Intel® Xeon® Scalable 6246 Gold 12 Core 3.30G 24.75M 165W",
                        "description": "Intel® Xeon® Scalable 6246 Gold 12 Core 3.30G 24.75M 165W",
                        "price": 4620,
                        "base_price": 4620,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 2
                    },
                    {
                        "id": "1195",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "1 Intel® Xeon® Scalable 6252 Gold 24 Core 2.10G 35.75M 150W",
                        "short_name": "Intel® Xeon® Scalable 6252 Gold 24 Core 2.10G 35.75M 150W",
                        "description": "Intel® Xeon® Scalable 6252 Gold 24 Core 2.10G 35.75M 150W",
                        "price": 4536,
                        "base_price": 4536,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 2
                    },
                    {
                        "id": "1196",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "1 Intel® Xeon® Scalable 6254 Gold 18 Core 3.10G 24.75M 200W",
                        "short_name": "Intel® Xeon® Scalable 6254 Gold 18 Core 3.10G 24.75M 200W",
                        "description": "Intel® Xeon® Scalable 6254 Gold 18 Core 3.10G 24.75M 200W",
                        "price": 4056,
                        "base_price": 4056,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 2
                    },
                    {
                        "id": "1140",
                        "type_id": 46,
                        "brand_id": "20",
                        "name": "1 Intel® Xeon® 4 Core 4T E3-1220v6 3000/8M",
                        "short_name": "Intel® Xeon® 4 Core 4T E3-1220v6 3000/8M",
                        "description": "Intel® Xeon® 4 Core 4T E3-1220v6 3000/8M",
                        "price": 268,
                        "base_price": 268,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 2
                    }
                ],
                "47": [
                    {
                        "id": "0",
                        "type_id": "47",
                        "brand_id": "0",
                        "name": "",
                        "short_name": "",
                        "description": "",
                        "price": 0,
                        "base_price": 0,
                        "value": "0",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1140",
                        "type_id": 47,
                        "brand_id": "20",
                        "name": "Intel® Xeon® 4 Core 4T E3-1220v6 3000/8M",
                        "short_name": "Intel® Xeon® 4 Core 4T E3-1220v6 3000/8M",
                        "description": "Intel® Xeon® 4 Core 4T E3-1220v6 3000/8M",
                        "price": 268,
                        "base_price": 268,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    }
                ],
                "48": [
                    {
                        "id": "0",
                        "type_id": "48",
                        "brand_id": "0",
                        "name": "",
                        "short_name": "",
                        "description": "",
                        "price": 0,
                        "base_price": 0,
                        "value": "0",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 0,
                        "count": 0
                    },
                    {
                        "id": "1270",
                        "type_id": 48,
                        "brand_id": "30",
                        "name": "Предустановка UNIX Server 2019 Std Rus, any core",
                        "short_na1 me": "Предустановка UNIX Server 2019 Std Rus, any core",
                        "description": "Предустановка UNIX Server 2019 Std Rus, any core",
                        "core_limit": 0,
                        "price": 877,
                        "base_price": 877,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1270",
                        "type_id": 48,
                        "brand_id": "30",
                        "name": "Предустановка Windows Server 2019 Std Rus, 16 core",
                        "short_na1 me": "Предустановка Windows Server 2019 Std Rus, 16 core",
                        "description": "Предустановка Windows Server 2019 Std Rus, 16 core",
                        "core_limit": 16,
                        "price": 877,
                        "base_price": 877,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1271",
                        "type_id": 48,
                        "brand_id": "30",
                        "name": "Предустановка Windows Server 2019 Std Rus, 24 core",
                        "short_na1 me": "Предустановка Windows Server 2019 Std Rus, 24 core",
                        "description": "Предустановка Windows Server 2019 Std Rus, 24 core",
                        "core_limit": 24,
                        "price": 1303,
                        "base_price": 1303,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    }
                ],
                "49": [
                    {
                        "id": "0",
                        "type_id": "49",
                        "brand_id": "0",
                        "name": "",
                        "short_name": "",
                        "description": "",
                        "price": 0,
                        "base_price": 0,
                        "value": "0",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1265",
                        "type_id": 49,
                        "brand_id": "29",
                        "name": "Контроллер Ethernet, Dual port Gigabit, Intel",
                        "short_name": "Контроллер Ethernet, Dual port Gigabit, Intel",
                        "description": "Контроллер Ethernet, Dual port Gigabit, Intel",
                        "price": 144,
                        "base_price": 144,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1266",
                        "type_id": 49,
                        "brand_id": "29",
                        "name": "Контроллер Ethernet, Quad port, Intel",
                        "short_name": "Контроллер Ethernet, Quad port, Intel",
                        "description": "Контроллер Ethernet, Quad port, Intel",
                        "price": 264,
                        "base_price": 264,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1268",
                        "type_id": 49,
                        "brand_id": "29",
                        "name": "Контроллер Ethernet, Dual port 10G, SFP+, Intel",
                        "short_name": "Контроллер Ethernet, Dual port 10G, SFP+, Intel",
                        "description": "Контроллер Ethernet, Dual port 10G, SFP+, Intel",
                        "price": 246,
                        "base_price": 246,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1348",
                        "type_id": 49,
                        "brand_id": "29",
                        "name": "Контроллер Ethernet, Dual port 10G, RJ-45",
                        "short_name": "Контроллер Ethernet, Dual port 10G, RJ-45",
                        "description": "Контроллер Ethernet, Dual port 10G, RJ-45",
                        "price": 624,
                        "base_price": 624,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1264",
                        "type_id": 49,
                        "brand_id": "29",
                        "name": "Контроллер FibreChannel, 8 Gbit, Single port, Qlogic",
                        "short_name": "Контроллер FibreChannel, 8 Gbit, Single port, Qlogic",
                        "description": "Контроллер FibreChannel, 8 Gbit, Single port, Qlogic",
                        "price": 432,
                        "base_price": 432,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1263",
                        "type_id": 49,
                        "brand_id": "29",
                        "name": "Контроллер FibreChannel, 2 x 8 Gbit, Dual port, Qlogic",
                        "short_name": "Контроллер FibreChannel, 2 x 8 Gbit, Dual port, Qlogic",
                        "description": "Контроллер FibreChannel, 2 x 8 Gbit, Dual port, Qlogic",
                        "price": 597,
                        "base_price": 597,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    }
                ],
                "50": [
                    {
                        "id": "0",
                        "type_id": "50",
                        "brand_id": "0",
                        "name": "",
                        "short_name": "",
                        "description": "",
                        "price": 0,
                        "base_price": 0,
                        "value": "0",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1347",
                        "type_id": 50,
                        "brand_id": "28",
                        "name": "Модуль удаленного управления AXXRMM4LITE2",
                        "short_name": "Модуль удаленного управления AXXRMM4LITE2",
                        "description": "Модуль удаленного управления AXXRMM4LITE2",
                        "price": 54,
                        "base_price": 54,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1254",
                        "type_id": 50,
                        "brand_id": "28",
                        "name": "Батарейка RAID",
                        "short_name": "Батарейка RAID",
                        "description": "Батарейка RAID",
                        "price": 212,
                        "base_price": 212,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    }
                ],
                "51": [
                    {
                        "id": "1250",
                        "type_id": 51,
                        "brand_id": "27",
                        "name": "Расширенная гарантия 3 года с выездом (ONS3)",
                        "short_name": "Расширенная гарантия 3 года с выездом (ONS3)",
                        "description": "Расширенная гарантия 3 года с выездом (ONS3)",
                        "price": 0,
                        "base_price": 0,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1251",
                        "type_id": 51,
                        "brand_id": "27",
                        "name": "Расширенная гарантия 5 лет (SC5)",
                        "short_name": "Расширенная гарантия 5 лет (SC5)",
                        "description": "Расширенная гарантия 5 лет (SC5)",
                        "price": 0,
                        "base_price": 0,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1252",
                        "type_id": 51,
                        "brand_id": "27",
                        "name": "Расширенная гарантия 5 лет с выездом (ONS5)",
                        "short_name": "Расширенная гарантия 5 лет с выездом (ONS5)",
                        "description": "Расширенная гарантия 5 лет с выездом (ONS5)",
                        "price": 0,
                        "base_price": 0,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    },
                    {
                        "id": "1253",
                        "type_id": 51,
                        "brand_id": "27",
                        "name": "Дополнительная опция «Невозврат носителей информации» (NR3)",
                        "short_name": "Дополнительная опция «Невозврат носителей информации» (NR3)",
                        "description": "Дополнительная опция «Невозврат носителей информации» (NR3)",
                        "price": 0,
                        "base_price": 0,
                        "value": "1",
                        "is_composite": "1",
                        "is_enabled": "1",
                        "simple_mode": "1",
                        "core_count": 1,
                        "count": 0
                    }
                ]
            },
            configurator: {
                cpu: [],
                fac: [],
                ups: []
            },
            preset: {
                update: function (val) {
                    console.log('preset update', val, configuratorAlpine())
                },
                loaded: false,
                totalDescription: '',
                exchangeRate: 75,
                currencyOnlyRub: true,
                platformPrice: 208,
                itemCount: 1,
                totalPrice: 0,
                totalPriceD: 0,
                totalPriceItemsD: 0,
                totalPriceR: 0,
                totalPriceItemsR: 0,
                hddCount: 0,
                components: {
                    "Soft": [
                        {
                            "id": "0",
                            "name": "",
                            "count": 0
                        },
                        {
                            "id": "1274",
                            "type_id": 48,
                            "brand_id": "30",
                            "name": "Предустановка UNIX Server 2019 Std Rus, any core",
                            "short_na1 me": "Предустановка UNIX Server 2019 Std Rus, any core",
                            "description": "Предустановка UNIX Server 2019 Std Rus, any core",
                            "core_limit": 0,
                            "price": 877,
                            "base_price": 877,
                            "value": "1",
                            "is_composite": "1",
                            "is_enabled": "1",
                            "simple_mode": "1",
                            "core_count": 1,
                            "count": 0
                        },
                        {
                            "id": "1273",
                            "type_id": 48,
                            "brand_id": "30",
                            "name": "Предустановка UNIX Server 2019 Std Rus, 8 core",
                            "short_na1 me": "Предустановка UNIX Server 2019 Std Rus, any core",
                            "description": "Предустановка UNIX Server 2019 Std Rus, any core",
                            "core_limit": 8,
                            "price": 877,
                            "base_price": 877,
                            "value": "1",
                            "is_composite": "1",
                            "is_enabled": "1",
                            "simple_mode": "1",
                            "core_count": 1,
                            "count": 0
                        },
                        {
                            "id": "1272",
                            "type_id": 48,
                            "brand_id": "30",
                            "name": "Предустановка Windows Server 2019 Std Rus, 16 core",
                            "short_na1 me": "Предустановка Windows Server 2019 Std Rus, 16 core",
                            "description": "Предустановка Windows Server 2019 Std Rus, 16 core",
                            "core_limit": 16,
                            "price": 877,
                            "base_price": 877,
                            "value": "1",
                            "is_composite": "1",
                            "is_enabled": "1",
                            "simple_mode": "1",
                            "core_count": 1,
                            "count": 0
                        },
                        {
                            "id": "1271",
                            "type_id": 48,
                            "brand_id": "30",
                            "name": "Предустановка Windows Server 2019 Std Rus, 24 core",
                            "short_na1 me": "Предустановка Windows Server 2019 Std Rus, 24 core",
                            "description": "Предустановка Windows Server 2019 Std Rus, 24 core",
                            "core_limit": 24,
                            "price": 1303,
                            "base_price": 1303,
                            "value": "1",
                            "is_composite": "1",
                            "is_enabled": "1",
                            "simple_mode": "1",
                            "core_count": 1,
                            "count": 0
                        }
                    ]
                }
            },
            counts: {
                "3": "4",
                "4": "4",
                "5": "4",
                "10": "1",
                "11": "4"
            },
            preselected: {
                "CPU": "1",
                "RAM": "1",
                "RAID": "1",
                "OtherContr": "1",
                "Soft": "1",
                "Other": "1",
                "UPS": "1",
                "Services": "1",
                "Switch": "1"
            },
            multiple: ['SATA', 'SAS', 'SSD', 'OtherContr', 'Soft', 'UPS', 'Switch'],
            partTypeIds: {
                "CPU": 46,
                "RAM": 43,
                "SSD": 42,
                "SATA": 39,
                "SAS": 40,
                "RAID": 41,
                "OtherContr": 49,
                "Soft": 48,
                "Other": 50,
                "UPS": 38,
                "Services": 51,
                "Switch": 47
            },
            partTypeIds_: {
                CPU: 1,
                RAM: 2,
                SSD: 3,
                SATA: 4,
                SAS: 5,
                DVD: 6,
                RAID: 7,
                OtherContr: 8,
                SP: 9,
                Soft: 10,
                Other: 11,
                UPS: 36,
                Services: 47,
                GPU: 50,
                Switch: 52,
                Cache: 54
            },
            updateTimer: 0,
            activeTab: 'configurator',
            switchParam(evt, prm, ind) {
                evt.preventDefault();
                this.configurator[prm] = ind;

                return false;
            },
            toggleParam(evt, prm, name) {
                evt.preventDefault();
                let that = this;

                if (this.configurator.hasOwnProperty(prm)) {
                    let pos = this.configurator.hasOwnProperty(prm) ? this.configurator[prm].indexOf(name) : -1;

                    if (pos > -1) {
                        this.configurator[prm].splice(pos, 1);
                    } else {
                        this.configurator[prm].push(name);
                    }
                } else {
                    this.configurator[prm] = [name]
                }

                setTimeout(function () {
                    setSearch(that.configurator);
                    setCookie('configurator', JSON.stringify(that.configurator));
                }, 100);

                return false;
            },
            getCheck(index, item, prm) {
                return '<label class="checkbox_v2"><input type="checkbox" value="3" :checked="{ activeParam(\'' + prm + '\', ' + (index + 1) + ') }"><span class="checkbox__text">' + item + '</span></label>'
            },
            activeParam(prm, name) {
                return this.configurator.hasOwnProperty(prm) && this.configurator[prm].indexOf(name) > -1
            },
            checkVisibility(cpu, fac, ups) {
                let ret = true;
                let that = this;

                if (that.configurator.hasOwnProperty('cpu') && that.configurator.cpu.length && that.configurator.cpu.indexOf(cpu) < 0) {
                    ret = false;
                }

                if (that.configurator.hasOwnProperty('fac') && that.configurator.fac.length && that.configurator.fac.indexOf(fac) < 0) {
                    ret = false;
                }

                if (that.configurator.hasOwnProperty('ups') && that.configurator.ups.length && that.configurator.ups.indexOf(ups) < 0) {
                    ret = false;
                }

                return ret
            },
            availableParam(prm) {
                let find = [];
                let slug = {cpu: 'xCPU', fac: '', ups: 'xPS'};

                for (const x of brand.config.parts) {
                    let check = (x[prm] + slug[prm]).toUpperCase();

                    if (find.indexOf(check) === -1) {
                        find.push(check)

                        this.configurator[prm].push(x[prm])
                    }
                }

                return find
            },
            getInfo(ty, id) {
                let ret = {description: '', price: ''};
                let arr = this.brand[this.partTypeIds[ty] + ''] || [];

                if (arr.length) {
                    for (let i = 0; i < arr.length; i++) {
                        let a = arr[i];

                        if (a.id + '' === id + '') {
                            ret = {description: a.description || a.name, price: a.price};
                        }
                    }
                }

                return ret;
            },
            pricePrint(val) {
                let rx = /\d{1,3}(?=(\d{3})+(?!\d))/g;
                return (parseFloat(val).toFixed(2) + '').replace(rx, '$& ')
            },
            appendEl(typeId, c) {
                //console.log('appendEl', typeId, c);

                this.preset[typeId].list.push({
                    id: '',
                    count: this.preselectedCount(typeId)
                });
            },
            checkFixedBlock() {
                setTimeout(function () {
                    window.fixTotalBox();
                }, 1);
            },
            setActiveTab(tab) {
                this.activeTab = tab;
                let target = document.getElementById('tab_' + tab);

                if (target && window.innerWidth < 640) {
                    window.smoothScrollTo(window, window.pageYOffset, window.pageYOffset + target.getBoundingClientRect().top, 1000);
                }

                this.checkFixedBlock();
            },
            updateCounter(evt, upd) {
                let inp = evt.target.parentNode.querySelector('input[type=number]');
                if (upd > 0) {
                    inp.stepUp();
                } else {
                    inp.stepDown();
                }

                this.preset.itemCount = parseInt(inp.value);

                if (isNaN(this.preset.itemCount)) {
                    this.preset.itemCount = 1;
                }

                this.preset.totalPriceItemsD = this.pricePrint(this.preset.totalPrice * this.preset.itemCount);
                this.preset.totalPriceItemsR = this.pricePrint(this.preset.exchangeRate * this.preset.totalPrice * this.preset.itemCount);
            },
            getPreset() {
                return this.preset;
            },
            updatePreset(skip) {
                //return;

                let that = this;
                let hddCount = 0;
                let price = 0;
                let descr = '';

                for (let typeId in this.partTypeIds) {
                    let item = this.preset[typeId];

                    if (!item) {
                        continue;
                    }

                    if ('list' in item) {
                        let keys = Object.keys(item.list);

                        for (let ind = 0; ind < keys.length; ind++) {
                            let component = item.list[keys[ind]];

                            if (!component) {
                                continue;
                            }

                            let info = this.getInfo(typeId, component.id);

                            //console.log('typeId', typeId, component, info);

                            if (component.id.length && ind < keys.length) {
                                let c = parseInt(component.count || 0);

                                if (['SATA', 'SAS', 'SSD'].indexOf(typeId) !== -1) {
                                    hddCount += c;
                                }

                                let count = +((component.count || 0));

                                if (this.multiple.indexOf(typeId) !== -1) {
                                    if (!info.price && component.id == '0') {
                                        count = 0;
                                        let len = this.preset[typeId].list.length;

                                        if (len > 1 && (len - 1) > ind) {
                                            return this.removeItem(typeId, ind);
                                        }
                                    } else if (ind === keys.length - 1 && c) {
                                        this.appendEl(typeId, c);
                                    }
                                }

                                descr += (count && info.description) ? ' / ' + info.description : '';
                                price += count * info.price;
                            }
                        }
                    } else if (item.id) {
                        let info = this.getInfo(typeId, item.id);
                        let count = +((item.count || 0));
                        descr += (count && info.description) ? ' / ' + info.description : '';
                        price += count * info.price;
                    }
                }

                if (!skip) {
                    this.preset.totalPrice = price + (this.preset.platformPrice || 0);
                    this.preset.hddCount = hddCount;
                    this.preset.totalDescription = descr.trim().replace(/^\//, '');
                    this.preset.totalPriceR = this.pricePrint(this.preset.exchangeRate * this.preset.totalPrice);
                    this.preset.totalPriceD = this.pricePrint(this.preset.totalPrice);
                    this.preset.totalPriceItemsD = this.pricePrint(this.preset.totalPrice * this.preset.itemCount);
                    this.preset.totalPriceItemsR = this.pricePrint(this.preset.exchangeRate * this.preset.totalPrice * this.preset.itemCount);
                }

                setTimeout(function () {
                    let event = new CustomEvent("update-preset", {
                        detail: {
                            preset: that.preset
                        }
                    });

                    window.dispatchEvent(event);

                    that.checkFixedBlock()
                }, 10);

                //console.log('updatePreset', this.preset);
            },
            preselectedCount(typeId) {
                return this.preselected.hasOwnProperty(typeId) ? this.preselected[typeId] : '0';
            },
            updateSelect(type, num) {
                clearTimeout(this.updateTimer);
                this.preset[type].count = num !== void 0 ? num : this.counts[type] || 1;

                this.updateTimer = setTimeout(function () {
                    let id = 'preset_' + type + '_count';

                    // console.log('updateSelect', id, num);

                    let sel = document.getElementById(id);

                    // console.log(id, window.cstSel, sel);

                    if (id in window.cstSel) {
                        for (let i = 0; i < window.cstSel[id].panel.children.length; i++) {
                            window.cstSel[id].panel.removeChild(window.cstSel[id].panel.children[i])
                        }

                        window.cstSel[id].append(sel.options);
                    }
                }, 100);
            },
            selectModel(typeId) {
                //this.offer[typeId] = ''

                return this.offer[typeId];
            },
            selectOption(typeId) {
                let that = this;
                let ret = {};
                let typeCode = that.partTypeIds[typeId];
                let curCPU = that.preset.CPU ? that.brand[that.partTypeIds['CPU']].find(f => f.id === that.preset.CPU.id) : void 0;

                if (typeCode in that.brand) {
                    let iter = 0;
                    let list = that.brand[typeCode];

                    if (typeId === 'Soft' && curCPU) {
                        list = list.filter(s => s.id === '' || s.core_limit >= curCPU.core_count);
                    }

                    for (const x of list) {
                        ret[iter] = {id: x.id, name: x.name};
                        iter++;
                    }
                }

                console.log('selectOption', typeId, curCPU, that.getPreset(), typeCode, that.preset, ret);

                return ret
            },
            optionsList(typeId, count) {
                let ret = [];
                let typeCode = this.partTypeIds[typeId];

                //console.log('count', count);

                if (typeCode in this.brand) {
                    for (const x of this.brand[typeCode]) {
                        ret.push({
                            id: x.id,
                            isDelete: true,
                            count: x.count || this.counts[typeCode] || 1,
                            text: x.name
                        });
                    }
                }

                return ret
            },
            optionsCount(typeId) {
                let ret = [];
                let typeCode = this.partTypeIds[typeId];
                let id = '';
                let count = 0;

                if (typeId in this.preset) {
                    if (typeof this.preset[typeId].id === 'string') {
                        id += this.preset[typeId].id
                    } else {
                        id += this.preset[typeId].list[0].id
                    }
                }

                if (typeCode in this.brand) {
                    for (const x of this.brand[typeCode]) {
                        if (id = x.id + '') {
                            count = x.count || this.counts[typeCode] || 1;
                            break;
                        }
                    }
                }

                if (count) {
                    for (let i = 0; i < +count; i++) {
                        //console.log('push', i, count);
                        ret.push(i + 1);
                    }
                }

                return ret
            },
            selectOptionCount(typeId) {
                let ret = {};
                let typeCode = this.partTypeIds[typeId];
                let id = '';
                let count = 0;

                if (typeId in this.preset) {
                    if (typeof this.preset[typeId].id === 'string') {
                        id += this.preset[typeId].id
                    } else {
                        id += this.preset[typeId].list[0].id
                    }
                }

                if (typeCode in this.brand) {
                    for (const x of this.brand[typeCode]) {
                        if (id = x.id + '') {
                            count = x.count || this.counts[typeCode] || 1;
                            break;
                        }
                    }
                }

                if (count) {
                    let iter = 0;
                    for (let i = 0; i < +count; i++) {
                        ret[iter] = {id: i + 1, name: i + 1};
                        iter++;
                    }
                }

                return ret
            },
            getParamList(typeId) {
                console.log('getParamList', typeId, this.preset[typeId]);
                return this.preset[typeId].list;
            },
            triggerUpdate(inp) {
                let that = this;
                setTimeout(function () {
                    if ("createEvent" in document) {
                        let evt = document.createEvent("HTMLEvents");
                        evt.initEvent("change", false, true);
                        inp.dispatchEvent(evt);
                    } else {
                        inp.fireEvent("onchange");
                    }
                }, 10);
            },
            removeItem(typeId, ind) {
                let rm = this.preset[typeId];

                if (rm) {
                    if ('list' in rm) {
                        if (rm.list.length > 1) {
                            rm.list.splice(ind, 1);
                        }
                    } else {
                        rm.count = '';
                        rm.id = '';
                    }

                    if (typeId === 'CPU') {
                        this.preset.Soft.list = [{id: '', count: this.preselectedCount('Soft')}];
                    }

                    //let inpCount = document.querySelector('input[data-preset="' + typeId + '_count"][data-index="' + (ind || 0) + '"]');

                    //if (inpCount) {
                        //inpCount.value = this.preselected.hasOwnProperty(typeId) ? this.preselected[typeId] : '0';
                        //this.triggerUpdate(inpCount);
                    //}

                    let inp = document.querySelector('input[data-preset="' + typeId + '"][data-index="' + (ind || 0) + '"]');

                    inp.value = '';

                    this.updatePreset();

                    this.triggerUpdate(inp);
                }
            },
            loadHistory() {
                let config = {};
                let search = parseUrlQuery();

                if (search.hasOwnProperty('cpu')) {
                    config.cpu = search.cpu.split(',')
                }

                if (search.hasOwnProperty('fac')) {
                    config.fac = search.fac.split(',')
                }

                if (search.hasOwnProperty('ups')) {
                    config.ups = search.ups.split(',')
                }

                if (!Object.keys(config).length) {
                    config = JSON.parse(getCookie('configurator'));
                } else {

                }

                if (config) {
                    this.configurator = config;
                    setCookie('configurator', JSON.stringify(this.configurator));
                }
            },
            init() {
                let multiFields = this.multiple;
                let that = this;

                that.loadHistory();

                if (window.hasOwnProperty('order')) {
                    console.log('loading order', window.order);
                    this.preset = window.order;
                    this.preset.loaded = true;
                    //this.updatePreset(true);
                } else {
                    for (let x in this.partTypeIds) {
                        if (this.partTypeIds.hasOwnProperty(x)) {
                            if ((this.partTypeIds[x] + '') in this.brand) {

                                this.preset.components[x] = this.selectOption(x) // this.brand[this.partTypeIds[x]];

                                if (!this.preset.hasOwnProperty(x)) {
                                    let count = that.preselectedCount(x);

                                    if (multiFields.indexOf(x) > -1) {
                                        //this.preset.hddList.push({name: x, list: [{id: '', count: count}]})
                                        this.preset[x] = {list: [{id: '', count: count}]};
                                    } else {
                                        this.preset[x] = {id: '', count: count};
                                    }
                                }
                            }
                        }
                    }

                    this.preset.loaded = true;
                    this.updatePreset();
                }

                if (this.preset.totalPriceD == parseInt(this.preset.totalPriceD)) {
                    this.preset.totalPriceD = this.pricePrint(this.preset.totalPriceD);
                }

                if (this.preset.totalPriceR == parseInt(this.preset.totalPriceR)) {
                    this.preset.totalPriceR = this.pricePrint(this.preset.totalPriceR);
                }

                this.preset.itemCount = parseInt(this.preset.itemCount || 1)
                this.preset.totalPrice = parseInt(this.preset.totalPrice || 0)
                this.preset.platformPrice = parseInt(this.preset.platformPrice || 0)

                this.preset.totalPriceItemsD = this.pricePrint(this.preset.totalPrice * this.preset.itemCount)
                this.preset.totalPriceItemsR = this.pricePrint(this.preset.totalPrice * this.preset.itemCount * this.preset.exchangeRate)

                window.onpopstate = function () {
                    that.loadHistory();
                }

                console.log('this.preset', this.preset);
            }
        }
    }

    function unlinkObj(obj) {
        return JSON.parse(JSON.stringify(obj));
    }

    function togglePopup(show, txt) {
        let popup = document.getElementById('popup_thanks');
        popup.querySelector('.popup__text').textContent = txt || '';
        popup.classList[show ? 'remove' : 'add']('hide');
    }

    function inputChangeFunc(inp) {
        setCookie(inp.target.name, inp.target.value);
    }

    function parseUrlQuery() {
        var data = {};
        if (location.search) {
            var pair = (location.search.substr(1)).split('&');
            for (var i = 0; i < pair.length; i++) {
                var param = pair[i].split('=');
                data[param[0]] = decodeURIComponent(param[1]);
            }
        }
        return data;
    }

    function setSearch(data) {
        let srch = parseUrlQuery();
        let ret = '';

        srch.cpu = data.hasOwnProperty('cpu') ? data.cpu.join(',') : '';
        srch.fac = data.hasOwnProperty('fac') ? data.fac.join(',') : '';
        srch.ups = data.hasOwnProperty('ups') ? data.ups.join(',') : '';

        let keys = Object.keys(srch);

        for (let i = 0; i < keys.length; i++) {
            let key = keys[i];
            let val = srch[key];

            if (val) {
                ret += '&' + key + '=' + val;
            }
        }

        window.history.pushState({}, document.title, location.pathname + '?' + ret.substring(1));

        //window.history.replaceState({}, document.title, location.pathname + '?' + ret.substring(1));

    }

    function getCookie(name) {
        let cookie = " " + document.cookie;
        let search = " " + name + "=";
        let setStr = null;
        let offset = 0;
        let end = 0;
        if (cookie.length > 0) {
            offset = cookie.indexOf(search);
            if (offset != -1) {
                offset += search.length;
                end = cookie.indexOf(";", offset)
                if (end == -1) {
                    end = cookie.length;
                }
                setStr = unescape(cookie.substring(offset, end));
            }
        }
        return (setStr);
    }

    function setCookie(name, value, expires, path, domain, secure) {
        if (name) {
            document.cookie = name + "=" + escape(value || '') +
                ((expires) ? "; expires=" + expires : "") +
                ((path) ? "; path=" + path : "") +
                ((domain) ? "; domain=" + domain : "") +
                ((secure) ? "; secure" : "");
        }
    }

    function configuratorSubmit(frm) {
        let formData = serializeForm(frm.target);

        fetch('./source/data/brand.json', {
            method: 'GET', // POST
            headers: {
                'Content-Type': 'application/json'
            },
            //body: JSON.stringify(formData)
        })
            .then(function () {
                return JSON.parse(JSON.stringify(formData));
            })
            .then(function (result) {
                console.log('Success:', result);
                togglePopup(true, 'Данные отправлены');
            })
            .catch(function (error) {
                console.error('Error:', error);
            });
    }

    function alpineSelect(config) {
        return {
            data: config.data,
            emptyOptionsMessage: config.emptyOptionsMessage || 'No results match your search.',
            focusedOptionIndex: null,
            name: config.name,
            model: config.model,
            open: false,
            options: {},
            placeholder: config.placeholder || 'Select an option',
            selectedValue: '',
            search: '',
            checkDisabled: function (d) {
                console.log('checkDisabled', configuratorAlpine(), d);
                return false;
            },
            closeListbox: function () {
                this.open = false;
                this.focusedOptionIndex = null;
                this.search = '';
            },
            focusNextOption: function () {
                if (this.focusedObjectIndex === null) return this.focusedObjectIndex = Object.keys(this.options).length - 1;
                if (this.focusedOptionIndex + 1 >= Object.keys(this.options).length) return;
                this.focusedOptionIndex++;

                //if (this.focusedOptionIndex in this.$refs.listbox.children) {
                //    this.$refs.listbox.children[this.focusedOptionIndex].scrollIntoView({
                //        block: "center",
                //    });
                //}
            },
            focusPreviousOption: function () {
                if (this.focusedObjectIndex === null) return this.focusedObjectIndex = 0;
                if (this.focusedOptionIndex <= 0) return;
                this.focusedOptionIndex--;

                //if (this.focusedOptionIndex in this.$refs.listbox.children) {
                //    this.$refs.listbox.children[this.focusedOptionIndex].scrollIntoView({
                //        block: "center",
                //    });
                //}
            },
            update: function () {
                let that = this;
                that.options = that.data;

                if (typeof that.data === 'function') {
                    that.options = that.data();
                }

                console.log('config', config, that.options);
            },
            init: function () {
                let that = this;

                that.update();

                let ds = that.$el.parentNode.dataset;
                let inp = document.querySelector('input[data-preset="' + ds.preset + '"][data-index="' + ds.index + '"]')

                inp.addEventListener('change', function () {
                    that.selectedValue = that.value = inp.value;
                });

                if (inp && inp.value) {
                    let cur = null;
                    let keys = Object.keys(that.options);

                    for (let i = 0; i < keys.length; i++) {
                        if (that.options[i].id == inp.value) {
                            cur = i;
                        }
                    }

                    that.value = cur;
                    that.selectedValue = cur;
                }

                if (!(that.value in that.options)) {
                    that.value = null;
                }

                that.$watch('search', (function (value) {
                    let find = that.data

                    if (typeof that.data === 'function') {
                        find = that.data();
                    }

                    if (!that.open || !value) {
                        return that.options = find;
                    }

                    that.options = Object.keys(find)
                        .filter(function (key) {
                            return (find[key].name + '').toLowerCase().includes((value + '').toLowerCase())
                        })
                        .reduce(function (options, key) {
                            options[key] = find[key];
                            console.log('options', options);
                            return options
                        }, {})
                }));
            },
            optionClick: function () {
                let that = this;

                if (!that.open) return that.toggleListboxVisibility();
                that.value = that.focusedOptionIndex;
                that.closeListbox();

                let ds = that.$el.parentNode.dataset;
                let inp = document.querySelector('input[data-preset="' + ds.preset + '"][data-index="' + ds.index + '"]')

                if (inp) {
                    let keys = Object.keys(that.options);

                    inp.value = that.options[keys[that.value]].id;
                    that.selectedValue = that.options[keys[that.value]].id;

                    setTimeout(function () {
                        if ("createEvent" in document) {
                            let evt = document.createEvent("HTMLEvents");
                            evt.initEvent("input", false, true);
                            inp.dispatchEvent(evt);
                            console.log('new val dispatchEvent', that.value, inp.value);
                        } else {
                            inp.fireEvent("oninput");
                            console.log('new val oninput', that.value, inp.value);
                        }
                    }, 10);
                } else {
                    console.log('no_inp', inp, ds);
                }
            },
            toggleListboxVisibility: function () {
                let that = this;

                if (that.open || that.disabled) {
                    return that.closeListbox();
                }

                that.focusedOptionIndex = that.value;

                if (that.focusedOptionIndex < 0) {
                    that.focusedOptionIndex = 0;
                }
                that.open = true;
                that.$nextTick(function () {
                    that.$refs.search.focus();
                    //that.$refs.listbox.children[that.focusedOptionIndex].scrollIntoView({
                    //    block: "nearest"
                    //});
                });
            },
        }
    }
